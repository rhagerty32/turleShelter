<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stats</title>
</head>
<script>
window.addEventListener('resize', function() {
    var statsContainer = document.getElementById('statsContainer');
    if (window.innerWidth < 1000) {
        statsContainer.classList.remove('flex');
    } else {
        statsContainer.classList.add('flex');
    }
});

// Initial check
window.dispatchEvent(new Event('resize'));
</script>

<body class="flex flex-col justify-center items-center w-screen h-full mt-20">
    <div id="statsContainer" class="flex flex-row gap-4 justify-center items-start mt-20">

        <!-- LEFT STATS -->
        <div class="flex flex-col gap-4 h-full justify-start items-center ml-4">
            <div class="bg-white p-4 rounded-xl shadow-md w-64">
                <h1 class="text-md text-gray-400 font-bold">Events</h1>
                <div class="flex flex-row gap-6">
                    <% statusCounts.forEach(function(count) { %>
                        <div class="flex flex-col gap-1">
                            <h1 class="text-xs text-gray-400 font-bold">
                                <%= count.status %>
                            </h1>
                            <p class="text-4xl">
                                <%= count.count %>
                            </p>
                        </div>
                        <% }); %>
                </div>
            </div>
            <div class="bg-white p-4 rounded-xl shadow-md w-64">
                <h1 class="text-md text-gray-400 font-bold">Hours Donated</h1>
                <p class="text-4xl">
                    <%= stats.totalServiceHours %>
                </p>
            </div>
            <div class="bg-white p-4 rounded-xl shadow-md w-64">
                <h1 class="text-md text-gray-400 font-bold">Vest Distributed</h1>
                <p class="text-4xl">
                    <%= itemCount %>
                </p>
            </div>
            <div class="bg-white p-4 rounded-xl shadow-md w-64">
                <h1 class="text-md text-gray-400 font-bold">Discovery Methods</h1>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <% survey.forEach(function(item) { %>
                        <div class="flex flex-col gap-1">
                            <h1 class="text-xs text-gray-400 font-bold">
                                <%= item.discoverymethod %>
                            </h1>
                            <p class="text-4xl">
                                <%= item.total %>
                            </p>
                        </div>
                        <% }); %>
                </div>
            </div>
        </div>
        <br><br>
        <!-- TABLEAU CHART -->
        <div class="bg-white p-2 rounded-xl shadow-md w-screen mr-4">
            <div class='tableauPlaceholder' id='viz1733436902454' style='position: relative'>
                <noscript>
                    <a href='#'>
                        <img alt='Dashboard 1 '
                            src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;XK&#47;XKW2DS4P3&#47;1_rss.png'
                            style='border: none' />
                    </a>
                </noscript>
                <object class='tableauViz' style='display:none;'>
                    <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' />
                    <param name='embed_code_version' value='3' />
                    <param name='path' value='shared&#47;XKW2DS4P3' />
                    <param name='toolbar' value='yes' />
                    <param name='static_image'
                        value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;XK&#47;XKW2DS4P3&#47;1.png' />
                    <param name='animate_transition' value='yes' />
                    <param name='display_static_image' value='yes' />
                    <param name='display_spinner' value='yes' />
                    <param name='display_overlay' value='yes' />
                    <param name='display_count' value='yes' />
                    <param name='language' value='en-US' />
                    <param name='filter' value='publish=yes' />
                </object>
                <script
                    type='text/javascript'>                    var divElement = document.getElementById('viz1733436902454'); var vizElement = divElement.getElementsByTagName('object')[0]; if (divElement.offsetWidth > 800) { vizElement.style.width = '1000px'; vizElement.style.height = '827px'; } else if (divElement.offsetWidth > 500) { vizElement.style.width = '1000px'; vizElement.style.height = '827px'; } else { vizElement.style.width = '100%'; vizElement.style.height = '1227px'; } var scriptElement = document.createElement('script'); scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js'; vizElement.parentNode.insertBefore(scriptElement, vizElement);                </script>
            </div>
        </div>
    </div>
</body>

</html>