<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<script>
    // Show modal for editing user details
    function openModal(user, type) {
        document.getElementById('modalFirstName').value = user.firstname;
        document.getElementById('modalLastName').value = user.lastname;
        document.getElementById('modalEmail').value = user.email;
        document.getElementById('modalPassword').value = user.password;
        document.getElementById('modalPhoneNumber').value = user.phone;
        document.getElementById('modalJobRole').value = user.jobrole;
        document.getElementById('modalSkillId').value = user.skillid;
        document.getElementById('modalCity').value = user.city;
        document.getElementById('modalState').value = user.state;
        document.getElementById('modalNotes').value = user.notes;
        document.getElementById('modalAvailability').value = user.availability;
        document.getElementById('modalDiscoveryMethod').value = user.discoverymethod;
        document.getElementById('editModal').classList.remove('hidden');
    }

    // Hide modal
    function closeModal(type) {
        document.getElementById('editModal').classList.add('hidden');
    }

    function closeAddModal() {
        document.getElementById('addModal').classList.add('hidden');
    }
</script>

<body class="bg-gray-50 font-sans">

    <div class="container mx-auto py-12 px-6 space-y-6">
        <div class="flex flex-row justify-between items-center">
            <h1 class="text-3xl font-bold text-gray-800 mb-8 mt-10">User Management</h1>

            <div class="flex justify-end">
                <button onclick="document.getElementById('addModal').classList.remove('hidden')"
                    class="px-6 py-2 bg-teal-500 text-white rounded-lg shadow-md hover:bg-teal-600 h-fit">Add
                    User</button>
            </div>
        </div>
        <div class="space-y-4">
            <% if (users && users.length> 0) { %>
                <% users.forEach(user=> { %>
                    <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg cursor-pointer"
                        onclick='openModal(<%- JSON.stringify(user) %>)'>
                        <h3 class="text-xl font-semibold text-gray-700">
                            <%= user.firstname %>
                                <%= user.lastname %>
                        </h3>
                        <p class="mt-2 text-gray-600"><strong>Email:</strong>
                            <%= user.email %>
                        </p>
                    </div>
                    <% }) %>
                        <% } else { %>
                            <div class="bg-white p-6 rounded-lg shadow-md">
                                <p class="text-gray-700">No users available.</p>
                            </div>
                            <% } %>
        </div>
    </div>

    <!-- EDITING USER -->
    <div id="editModal" class="hidden fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center z-50">
        <div class="bg-white p-8 rounded-lg shadow-md w-full max-w-3xl">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Edit User Details</h2>
            <form id="editUserForm" action="/editUser" method="POST">
                <div class="space-y-4">

                    <div class="grid grid-cols-4 gap-4">
                        <div>
                            <label for="modalFirstName" class="block text-gray-700">First Name</label>
                            <input type="text" id="modalFirstName" name="firstname"
                                class="mt-2 w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500"
                                required>
                        </div>
                        <div>
                            <label for="modalLastName" class="block text-gray-700">Last Name</label>
                            <input type="text" id="modalLastName" name="lastname"
                                class="mt-2 w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500"
                                required>
                        </div>
                        <div>
                            <label for="modalEmail" class="block text-gray-700">Email</label>
                            <input type="email" id="modalEmail" name="email"
                                class="mt-2 w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500"
                                required>
                        </div>
                        <div>
                            <label for="modalPassword" class="block text-gray-700">Password</label>
                            <input type="text" id="modalPassword" name="password"
                                class="mt-2 w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500">
                        </div>
                    </div>

                    <div class="grid grid-cols-3 gap-4">
                        <div>
                            <label for="modalPhoneNumber" class="block text-gray-700">Phone Number</label>
                            <input type="text" id="modalPhoneNumber" name="phone"
                                class="mt-2 w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500">
                        </div>
                        <div>
                            <label for="modalJobRole" class="block text-gray-700">Job Role</label>
                            <input type="text" id="modalJobRole" name="jobrole"
                                class="mt-2 w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500">
                        </div>
                        <div>
                            <label for="modalSkillId" class="block text-gray-700">Skill Level</label>
                            <select id="modalSkillId" name="skillid"
                                class="mt-2 w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500">
                                <option value="1">Beginner Sewing</option>
                                <option value="2">Advanced Sewing</option>
                                <option value="3">Machine Operation</option>
                            </select>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="modalCity" class="block text-gray-700">City</label>
                            <input type="text" id="modalCity" name="city"
                                class="mt-2 w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500">
                        </div>
                        <div>
                            <label for="modalState" class="block text-gray-700">State</label>
                            <input type="text" id="modalState" name="state"
                                class="mt-2 w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500">
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="modalAvailability" class="block text-gray-700">Availability</label>
                            <input type="text" id="modalAvailability" name="availability"
                                class="mt-2 w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500">
                        </div>
                        <div>
                            <label for="modalDiscoveryMethod" class="block text-gray-700">Discovery Method</label>
                            <select id="modalDiscoveryMethod" name="discoverymethod"
                                class="mt-2 w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500">
                                <option value="Family">Family</option>
                                <option value="Friend">Friend</option>
                                <option value="Other">Other</option>
                                <option value="Social Media">Social Media</option>
                                <option value="Website">Website</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="mt-2">
                    <label for="modalNotes" class="block text-gray-700">Notes</label>
                    <textarea id="modalNotes" name="notes"
                        class="mt-2 w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500"></textarea>
                </div>
                <div class="mt-6 flex justify-between gap-4">
                    <button type="button" onclick="closeModal()"
                        class="px-6 py-2 bg-gray-600 text-white rounded-lg shadow-md hover:bg-gray-700">Cancel</button>
                    <div class="flex flex-row gap-4">
                        <button type="button"
                            onclick="document.getElementById('editUserForm').action='/deleteUser'; document.getElementById('editUserForm').submit();"
                            class="px-6 py-2 bg-red-300 text-white rounded-lg shadow-md hover:bg-red-700">Delete</button>
                        <button type="submit"
                            class="px-6 py-2 bg-teal-500 text-white rounded-lg shadow-md hover:bg-teal-600">Save</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- ADDING USER -->
    <div id="addModal" class="hidden fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center z-50">
        <div class="bg-white p-8 rounded-lg shadow-md w-full max-w-3xl">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Add User</h2>
            <form action="/addUser" method="POST">
                <input type="hidden" id="modalUserId" name="id">
                <div class="space-y-4">

                    <div class="grid grid-cols-4 gap-4">
                        <div>
                            <label for="addModalFirstName" class="block text-gray-700">First Name</label>
                            <input type="text" id="addModalFirstName" placeholder="John" name="firstname"
                                class="mt-2 w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500"
                                required>
                        </div>
                        <div>
                            <label for="addModalLastName" class="block text-gray-700">Last Name</label>
                            <input type="text" id="addModalLastName" placeholder="Doe" name="lastname"
                                class="mt-2 w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500"
                                required>
                        </div>
                        <div>
                            <label for="addModalEmail" class="block text-gray-700">Email</label>
                            <input type="email" id="addModalEmail" placeholder="john@doe.com" name="email"
                                class="mt-2 w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500"
                                required>
                        </div>
                        <div>
                            <label for="addModalPassword" class="block text-gray-700">Password</label>
                            <input type="text" id="addModalPassword" placeholder="s0mething5ecure" name="password"
                                class="mt-2 w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500">
                        </div>
                    </div>

                    <div class="grid grid-cols-3 gap-4">
                        <div>
                            <label for="addModalPhoneNumber" class="block text-gray-700">Phone Number</label>
                            <input type="text" id="addModalPhoneNumber" placeholder="(801) 867-5309" name="phone"
                                class="mt-2 w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500">
                        </div>
                        <div>
                            <label for="addModalJobRole" class="block text-gray-700">Job Role</label>
                            <input type="text" id="addModalJobRole" placeholder="Event Coordinator" name="jobrole"
                                class="mt-2 w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500">
                        </div>
                        <div>
                            <label for="addModalSkillId" class="block text-gray-700">Skill Level</label>
                            <select id="addModalSkillId" name="skillid"
                                class="mt-2 w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500">
                                <option value="" disabled selected>Select Skill Level</option>
                                <option value="1">Beginner Sewing</option>
                                <option value="2">Advanced Sewing</option>
                                <option value="3">Machine Operation</option>
                            </select>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="addModalCity" class="block text-gray-700">City</label>
                            <input type="text" id="addModalCity" placeholder="Kaysville" name="city"
                                class="mt-2 w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500">
                        </div>
                        <div>
                            <label for="addModalState" class="block text-gray-700">State</label>
                            <select id="addModalState" name="state"
                                class="mt-2 w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500">
                                <option value="" disabled selected>Select State</option>
                                <option value="AL">Alabama</option>
                                <option value="AK">Alaska</option>
                                <option value="AZ">Arizona</option>
                                <option value="AR">Arkansas</option>
                                <option value="CA">California</option>
                                <option value="CO">Colorado</option>
                                <option value="CT">Connecticut</option>
                                <option value="DE">Delaware</option>
                                <option value="FL">Florida</option>
                                <option value="GA">Georgia</option>
                                <option value="HI">Hawaii</option>
                                <option value="ID">Idaho</option>
                                <option value="IL">Illinois</option>
                                <option value="IN">Indiana</option>
                                <option value="IA">Iowa</option>
                                <option value="KS">Kansas</option>
                                <option value="KY">Kentucky</option>
                                <option value="LA">Louisiana</option>
                                <option value="ME">Maine</option>
                                <option value="MD">Maryland</option>
                                <option value="MA">Massachusetts</option>
                                <option value="MI">Michigan</option>
                                <option value="MN">Minnesota</option>
                                <option value="MS">Mississippi</option>
                                <option value="MO">Missouri</option>
                                <option value="MT">Montana</option>
                                <option value="NE">Nebraska</option>
                                <option value="NV">Nevada</option>
                                <option value="NH">New Hampshire</option>
                                <option value="NJ">New Jersey</option>
                                <option value="NM">New Mexico</option>
                                <option value="NY">New York</option>
                                <option value="NC">North Carolina</option>
                                <option value="ND">North Dakota</option>
                                <option value="OH">Ohio</option>
                                <option value="OK">Oklahoma</option>
                                <option value="OR">Oregon</option>
                                <option value="PA">Pennsylvania</option>
                                <option value="RI">Rhode Island</option>
                                <option value="SC">South Carolina</option>
                                <option value="SD">South Dakota</option>
                                <option value="TN">Tennessee</option>
                                <option value="TX">Texas</option>
                                <option value="UT">Utah</option>
                                <option value="VT">Vermont</option>
                                <option value="VA">Virginia</option>
                                <option value="WA">Washington</option>
                                <option value="WV">West Virginia</option>
                                <option value="WI">Wisconsin</option>
                                <option value="WY">Wyoming</option>
                            </select>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="addModalAvailability" class="block text-gray-700">Availability</label>
                            <input type="text" id="addModalAvailability" placeholder="Tuesday afternoons"
                                name="availability"
                                class="mt-2 w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500">
                        </div>
                        <div>
                            <label for="addModalDiscoveryMethod" class="block text-gray-700">Discovery Method</label>
                            <select id="addModalDiscoveryMethod" name="discoverymethod"
                                class="mt-2 w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500">
                                <option value="" disabled selected>Select Discovery Method</option>
                                <option value="Family">Family</option>
                                <option value="Friend">Friend</option>
                                <option value="Other">Other</option>
                                <option value="Social Media">Social Media</option>
                                <option value="Website">Website</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="mt-2">
                    <label for="maddMdalNotes" class="block text-gray-700">Notes</label>
                    <textarea id="addModalNotes" name="notes"
                        class="mt-2 w-full px-4 py-2 border rounded-lg shadow-sm focus:ring-teal-500 focus:border-teal-500"></textarea>
                </div>
                <div class="mt-6 flex justify-end gap-4">
                    <button type="button" onclick="closeAddModal();"
                        class="px-6 py-2 bg-gray-600 text-white rounded-lg shadow-md hover:bg-gray-700">Cancel</button>
                    <button type="submit"
                        class="px-6 py-2 bg-teal-500 text-white rounded-lg shadow-md hover:bg-teal-600">Save</button>
                </div>
        </div>
        </form>
    </div>
    </div>

</body>

</html>